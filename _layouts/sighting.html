---
layout: default
---

{% assign poster_url = page.media-key | prepend: site.media_base_url | append: '_Thumbnail.jpg' %}
{% assign movie_url = page.media-key | prepend: site.media_base_url | append: '.mp4' %}

<main class="sighting">
  <div class="content">
    <div>{{ page.principle }}</div>
    <video controls
       src="{{ movie_url }}"
       poster="{{ poster_url }}"
       width="640"
       height="360">
      <a href="{{ movie_url }}">
        <img src="{{ poster_url }}">
      </a>
    </video>
    <h1>{{ page.title }}</h1>
    {% if page.summary %}
      <div class="summary">{{ page.summary }}</div>
    {% endif %}
    {{ content }}
  </div>

  <dl class="meta">
    <dt>Principle</dt>
    <dd>{{ page.principle }}</dd>
    <dt>Teaching Team</dt>
    <dd>{{ page.teaching-team }}</dd>
    <dt>Class</dt>
    <dd>{{ page.course-number }} {{ page.course-title }}</dd>
  </dl>
</main>

{% assign related = '' | split: '' %}
  {% for sighting in site.sightings %}
  {% if sighting.path == page.path %}{% continue %}{% endif %}
  {% if sighting.principle != page.principle %}{% continue %}{% endif %}
  {% assign related = related | push: sighting %}
{% endfor %}

{% if related.size > 0 %}
  <section class="related-content">
    <h2>Related Content</h2>
    <div class="sightings grid">
      {% for sighting in related %}
      <a class="sighting card" href={{ sighting.url }}>
        <div class="principle">{{ sighting.principle }}</div>
        <img src="{{ sighting.media-key | prepend: site.media_base_url | append: '_Thumbnail.jpg' }}"/>
        <h1>{{ sighting.title }}</h1>
        <div class="summary">{{ sighting.summary | default: 'TBD' }}</div>
      </a>
      {% endfor %}
    </div>
  </section>
{% endif %}
